<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>C5 Vision – Mapa de Cámaras</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/css/styles.css">

    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""
    />
</head>
<body>

<header class="main-header">
    <div class="logo">C5<span>Vision</span></div>

    <nav class="main-nav">
        <a href="/" class="nav-link">Inicio</a>
        <a href="/mapa" class="nav-link active">Mapa</a>
        <a href="/#camaras" class="nav-link">Cámaras</a>
        <a href="/#reportes" class="nav-link">Reportes</a>
    </nav>

    <div class="auth-actions" id="auth-actions">
        <button class="btn ghost" id="btn-login-header">Iniciar sesión</button>
        <button class="btn small primary" id="btn-register-header">Crear cuenta</button>
    </div>
</header>

<main>
    <section class="placeholder-section">
        <h1>Mapa interactivo de cámaras</h1>
        <p>
            Visualización de las cámaras registradas en el sistema C5 sobre el mapa de la ciudad.
            Haz clic en el mapa para colocar cámaras propuestas (manuales). También puedes
            detectar puntos ciegos y proponer cámaras nuevas con algoritmo genético.
        </p>

        <div class="map-layout">
            <div class="map-wrapper">
                <div id="map" class="map-container"></div>
            </div>

            <aside class="map-legend-card">
                <h2>Leyenda de coberturas</h2>
                <p class="legend-note">
                    Colores usados para las cámaras y sus niveles de cobertura estimada.
                </p>

                <ul class="map-legend-list">
                    <li><span class="legend-dot dot-actual"></span> Cámara actual del C5</li>
                    <li><span class="legend-dot dot-propuesta"></span> Cámara propuesta por el usuario / algoritmo</li>

                    <li class="legend-separator">Niveles de cobertura de un punto</li>
                    <li><span class="legend-dot dot-verde"></span> <strong>100 %</strong> del punto cubierto</li>
                    <li><span class="legend-dot dot-morado"></span> <strong>80 % – 99 %</strong> del punto cubierto</li>
                    <li><span class="legend-dot dot-celeste"></span> <strong>50 % – 79 %</strong> del punto cubierto</li>
                </ul>

                <p class="legend-note legend-note-small">
                    Estas métricas son una aproximación. El modelo se puede refinar después con datos reales del C5.
                </p>

                <hr class="legend-divider" />

                <div class="sim-header">
                    <h3 class="sim-title">Cámaras propuestas (manual)</h3>

                    <div class="sim-header-buttons">
                        <!-- Evalúa cámaras manuales usando endpoint REAL -->
                        <button class="btn small ghost" id="btn-evaluar-simulated" type="button">
                            Evaluar (porcentaje)
                        </button>

                        <button class="btn small ghost" id="btn-ga-cobertura" type="button">
                            Proponer cámaras (AG cobertura)
                        </button>

                        <button class="btn small ghost" id="btn-ag-puntos" type="button">
                            Detectar puntos ciegos (AG)
                        </button>

                        <button class="btn small primary" id="btn-save-good-simulated" type="button">
                            Guardar ≥ 80 %
                        </button>

                        <button class="btn small ghost btn-danger" id="btn-clear-simulated" type="button">
                            Quitar todas
                        </button>
                    </div>
                </div>

                <!-- Métricas GA cobertura -->
                <div id="ga-metrics"></div>

                <p class="legend-note legend-note-small">
                    Haz clic en el mapa para colocar una cámara propuesta (manual). Aquí verás su información
                    y podrás evaluarla (porcentaje real).
                </p>

                <ul id="simulated-cameras-list" class="simulated-cameras-list"></ul>

                <hr class="legend-divider" />

                <h3 class="sim-title">Puntos ciegos detectados</h3>
                <p class="legend-note legend-note-small">Se muestran como círculos grises en el mapa.</p>
                <ul id="blind-spots-list" class="simulated-cameras-list"></ul>
            </aside>
        </div>
    </section>
</main>

<footer class="main-footer">
    Proyecto C5 – Prototipo Académico
</footer>

<script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
></script>

<!-- UI general (auth/nav) -->
<script src="/js/main_v2.js"></script>

<!-- Mapa + lógica -->
<script src="/js/mapa.js?v=2"></script>


</body>
</html>
